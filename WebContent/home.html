<!DOCTYPE html>
<html lang="en">
<head>
  	<meta charset="ISO-8859-1">
  	<title>Home</title>
  	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<link rel="stylesheet" href="js/plugins/fontawesome-free/css/all.min.css">
  	<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  	<link rel="stylesheet" href="dist/css/adminlte.min.css">
  	<link rel="stylesheet" href="js/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
  
  	<!-- per la scomparsa del menu laterale -->
  	<style>
  		@media (min-width: 992px) {
			.sidebar-mini.sidebar-collapse .main-sidebar {
        		width: 0;
      		}
      	
      		.sidebar-mini.sidebar-collapse .main-header,
      		.sidebar-mini.sidebar-collapse .content-wrapper {
        		margin-left: 0 !important;
      		}
    	}
  	</style>
  
  	<!-- style della pagina -->
  	<style>
  		iframe {
  			padding: 0 !important;
  			overflow: hidden !important;
  			height: 33rem;
  		}
  
  		ul.operatori {
  			padding: 0;
  		}
  
  		.separatore{
  			font-size: 1.2em;
  			color: #8c858d
  		}
  	
  		.operatore {
  			margin-bottom: 0.3em;
  			padding-top: 0.2em;
  			padding-bottom: 0.2em;
  		}
  	
  		.operatori .btn-default {
    		max-width:36%;
    		display: inline-block;
   		} 
   
   		.operatori .trash {
    		max-width:20%;
    		max-height:20%;
    		display: inline-block;
   		}
   	
  		.operatori button {
  			width: 100%;
  		}
  	
  		img {
  			max-width: 100%;
  		}
  	
  		.card-body {
  			padding-left: 0.2rem !important;
  			padding-right: 0.2rem !important;
  		}
  
  		.card-header .btn {
  			padding-top: 0 !important;
  			padding-bottom: 0 !important;
  		}
  	
  		.icona {
  			width: 20px;
  			position: absolute;
  			bottom: 25px;
  		}
  	
  		.icona:first-of-type {
  			left: 18px;
		}
		
		.icona:nth-of-type(2) {
			left: 50px;
		}
  	</style>
</head>
<body class="hold-transition sidebar-mini layout-fixed">
<div class="wrapper">
	<nav class="main-header navbar navbar-expand navbar-white navbar-light">
    
    	<!-- Left navbar links -->
    	<ul class="navbar-nav">
    		<li class="nav-item">
        		<a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
      		</li>
    	</ul>

	    <!-- Bottone delle operazioni -->
    	<button id="op" type="button" class="btn btn-default" data-toggle="modal" data-target="#modal-xl"  onclick="filtro()" disabled>
    		Operazioni
    	</button>
  	</nav>
  	<aside class="main-sidebar sidebar-dark-primary elevation-4">
    	<!-- Brand Logo -->
    	<div class="brand-link align-content-center">
      		<a href="home.html">
        		<img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
        		<span class="brand-text font-weight-light">Codit 2.0</span>
      		</a>
    	</div>
		
    	<!-- Sidebar -->
    	<div class="sidebar">
 
      		<!-- Sidebar Menu -->
      		<nav class="mt-2">
        		<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false" >  
          			<li class="nav-item has-treeview">
            			<a href="#" class="nav-link">
              				<i class="nav-icon fas fa-chart-pie"></i>
              				<p>Operazioni salvate<i class="right fas fa-angle-left"></i></p>
            			</a>
            			<ul class="nav nav-treeview operatori" id="tutteOpLato">
            			</ul>
          			</li>
        		</ul>
      		</nav>
    	</div>
  	</aside>
  	<div class="content-wrapper">
 		<section class="content">
      		<div class="container-fluid">
        		<div class="row">
        
		        	<!-- Database sinistro -->
          			<div class="col-lg-5">
            			<div class="card-body">
              				<iframe id="db1" class="col-12 border-primary" src="frame.html" scrolling="no">
              				</iframe>
            			</div>
            
            			<!-- Bottone salvataggio database sinistro -->
            			<button id = "bS1" class="btn icona"  onclick="savePosition1()" disabled>
            				<img class="icona" src="icone/save.png"> 
            			</button>
            
            			<!-- Bottone reset database sinistro -->
            			<button id = "bR1" class="btn icona"  onclick="refresh1()" disabled>
            				<img class="icona" src="icone/reload.png"> 
            			</button>
          			</div>
          
          			<!-- Sezione operazioni -->
					<div class="col-lg-2">
          				<div class="card-header border-0">
              				<div class="d-flex justify-content-between">
              				</div>
            			</div>
          				<div class="card-body">
		    				<ul class="operatori" id="operatoriSelezionati">
		       				</ul>
	        			</div>
          			</div>
          
          			<!-- Database destro -->
          			<div class="col-lg-5">
	            		<div class="card-body" >
              				<iframe id="db2" class="col-12 border-primary" src="frame.html" scrolling="no">
              				</iframe>
              			</div>
              
						<!-- Bottone salvataggio database destro -->
             			<button id = "bS2" class="btn icona"  onclick="savePosition2()" disabled>
              				<img class="icona" src="icone/save.png"> 
             			</button>
             
             			<!-- Bottone reset database sinistro -->
             			<button id = "bR2" class="btn icona"  onclick="refresh2()" disabled>
              				<img class="icona" src="icone/reload.png"> 
             			</button>  
          			</div>
        		</div>
      		</div>
    	</section>
  	</div>

  	<div class="modal fade" id="modal-xl">
   		<div class="modal-dialog modal-xl">
      		<div class="modal-content">
        		<div class="modal-header">
          			<h4 class="modal-title">Operazioni disponibili</h4>
          			
          			<!-- Bottone per finestra operazioni -->
          			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
            			<span aria-hidden="true">&times;</span>
          			</button>
        		</div>
        			
        		<!-- Modal operazioni -->
        		<div class="modal-body">
          			<button id="btn1" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine1.png')">
            			<img src="imgFunzioni/Immagine1.png" alt="Derivable right">
          			</button>
          			<button id="btn2" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine2.png')">
            			<img src="imgFunzioni/Immagine2.png" alt="Derivable right">
          			</button>
          			<button id="btn3" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine3.png')">
            			<img src="imgFunzioni/Immagine3.png" alt="Derivable right">
          			</button>
          			<button id="btn4" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine4.png')">
            			<img src="imgFunzioni/Immagine4.png" alt="Derivable right">
          			</button>
          			<button id="btn5" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine5.png')">
            			<img src="imgFunzioni/Immagine5.png" alt="Derivable right">
          			</button>
          			<button id="btn6" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine6.png')">
            			<img src="imgFunzioni/Immagine6.png" alt="Derivable right">
          			</button>
          			<button id="btn7" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine7.png')">
            			<img src="imgFunzioni/Immagine7.png" alt="Derivable right">
          			</button>
          			<button id="btn8" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine8.png')">
            			<img src="imgFunzioni/Immagine8.png" alt="Derivable right">
          			</button>
          			<button id="btn9" type="button" class="btn btn-default" onclick="inserisciOperazione('imgFunzioni/Immagine9.png')">
            			<img src="imgFunzioni/Immagine9.png" alt="Derivable right">
          			</button>
        		</div>
      		</div>
	    </div>
	</div>
</div>

<!-- D3.js -->
<script src="https://d3js.org/d3.v4.min.js"></script>

<!-- jQuery -->
<script src="js/plugins/jquery/jquery.min.js"></script>

<!-- jQuery UI 1.11.4 -->
<script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>

<!-- Bootstrap 4 -->
<script src="js/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- ChartJS -->
<script src="js/plugins/chart.js/Chart.min.js"></script>

<!-- Sparkline -->
<script src="js/plugins/sparklines/sparkline.js"></script>

<!-- overlayScrollbars -->
<script src="js/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
<script src="js/plugins/bs-custom-file-input/bs-custom-file-input.min.js"></script>

<!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
<script>
	$.widget.bridge('uibutton', $.ui.button)
</script>

<script type="text/javascript">
	
	/* Script che imposta i valori dei tag input con id Nomeframe e frame nel frame1 e frame2 quando carica il documento */
	$(document).ready(function () {
		bsCustomFileInput.init();
    	var inside1 = iframeRef(document.getElementById('db1'));
		var inside2 = iframeRef(document.getElementById('db2'));
		inside1.getElementById("Nomeframe").value = "Nframe1";
		inside2.getElementById("Nomeframe").value = "Nframe2";
		inside1.getElementById("frame").value = "frame1";
		inside2.getElementById("frame").value = "frame2";
	});
  
	/* Script che imposta evento mouseover sulla pagina per controllare i valori per attivare i bottoni save, delete e operazioni  */
  	$(document).mouseover(function() {
		var Nframe1 = sessionStorage.getItem('Nframe1');
	   	if(Nframe1 == "Nframe1"){document.getElementById("bS1").disabled=false;document.getElementById("bR1").disabled=false;}
	    else{document.getElementById("bS1").disabled=true;document.getElementById("bR1").disabled=true;}	
	    
	    var Nframe2 = sessionStorage.getItem('Nframe2');
	    if(Nframe2 == "Nframe2"){document.getElementById("bS2").disabled=false;document.getElementById("bR2").disabled=false;}
	    else{document.getElementById("bS2").disabled=true;document.getElementById("bR2").disabled=true;}
	    
	    var frame1 = JSON.parse(sessionStorage.getItem('frame1'));
		var frame2 = JSON.parse(sessionStorage.getItem('frame2'));
		if(frame1 != null && frame2 != null){document.getElementById("op").disabled=false;}
	    else{document.getElementById("op").disabled=true;}		
	});
</script>

<!-- Script per il dimensionamento degli iframe -->
<script type="text/javascript">
	$('iframe').on('resize', function() {
    	$('iframe').height($(document).height() * 83/100);
    }).trigger('resize');
</script>

<!-- Script che setta una variabile nei frame per distinguerli -->
<script src="dist/js/adminlte.js"></script>
<script type="text/javascript">
	$('#db1').on('load', function () {
		var iframe1 = document.getElementById('db1');
		var docIframe = (iframe1.contentWindow || iframe1.contentDocument);
		if(docIframe.document) {
			docIframe = docIframe.document;
		}
		var text = docIframe.getElementById("frame");
		text.value = "frame1";
		var inside1 = iframeRef(document.getElementById('db1'));
		inside1.getElementById("Nomeframe").value = "Nframe1";
	});
	
	$('#db2').on('load', function () {
		var iframe2 = document.getElementById('db2');
		var docIframe = (iframe2.contentWindow || iframe2.contentDocument);
		if(docIframe.document) {
			docIframe = docIframe.document;
		}
		var text = docIframe.getElementById("frame");
		text.value = "frame2";
		var inside2 = iframeRef(document.getElementById('db2'));
		inside2.getElementById("Nomeframe").value = "Nframe2";
	});
</script>

<!-- Gestione della parte grafica -->
<script type="text/javascript">
	
	/* Funzione che serve a riciamre inserisciOperazione di modo che quando si fa il refresh e vengono caricati
	i database vengono inserite anche le oparazioni in sessione e colorati gli elementi delle operazioni. */
	function explode2(){
		inserisciOperazione("null");
	}
	setTimeout(explode2, 3500);
	
	/* Recupera i dati da JSONOperazioni e invia a loadScemaER() il JSON */
	function inserisciOperazione(img) {
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
			  if (this.readyState == 4 && this.status == 200) {loadSchemaER(this);}
		};
		xmlhttp.open("POST", "JSONOperazioni?op=" + img, true);	
		xmlhttp.send();		
	}
	
	/* Con il JSON recuperato da inserisciOperazione() inserisce le operazioni nella colonna centrale, nello storico (barra laterale)
	e tinge gli elementi del database del colore delle operazioni corrispettive */
	function loadSchemaER(xmlhttp) {
		var data = JSON.parse(xmlhttp.responseText);
		document.getElementById("operatoriSelezionati").innerHTML = "";
		var i = 0;
		while(data[i] != null){
			if(data[i].op == "imgFunzioni/Immagine1.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg4.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine2.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg3.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine3.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg5.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine4.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg13.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg11.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine5.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg6.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg8.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine6.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg2.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg6.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine7.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg10.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine8.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg9.png' alt='Derivable right'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine9.png") document.getElementById("operatoriSelezionati").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='bt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='bt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"bt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg11.png' alt='Derivable right'></button></li>";
			if(data[i].scelta != "null") {
				var btn = "bt"+data[i].scelta+"Operando"+i;
				document.getElementById(btn).style.borderColor = "black";
				document.getElementById(btn).style.borderWidth = "thick";
				document.getElementById(btn).disabled = true;
				if(data[i].scelta == 1) {document.getElementById("bt"+2+"Operando"+i).disabled = true;}
				else {document.getElementById("bt"+1+"Operando"+i).disabled = true;}
			}
			i++;
		}
		document.getElementById("tutteOpLato").innerHTML = "";
		i = 0;
		while(data[i] != null){
			if(data[i].op == "imgFunzioni/Immagine1.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg4.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine2.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg3.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine3.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg1.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg5.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine4.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg13.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg11.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine5.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg6.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg8.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine6.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg2.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg6.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine7.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg10.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine8.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg9.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].op == "imgFunzioni/Immagine9.png") document.getElementById("tutteOpLato").innerHTML +="<li class='d-flex justify-content-center align-items-center operatore selected' style='background-color:#"+data[i].colore+";'><button id='lt1Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt1Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg12.png' alt='Derivable right'></button><span class='separatore'>-</span><button id='lt2Operando"+i+"' type='button' class='btn btn-default' onclick='scelta(\"lt2Operando"+i+"\",\"#"+data[i].colore+"\")'><img src='imgFunzioni/subimg11.png' alt='Derivable right'></button><button id='cancella"+i+"' type='button' class='btn trash' onclick='elimina(\""+i+"\")'><img src='icone/trash.png'></button></li>";
			if(data[i].scelta != "null") {
				var btn = "lt"+data[i].scelta+"Operando"+i;
				document.getElementById(btn).style.borderColor = "black";
				document.getElementById(btn).style.borderWidth = "thick";
				document.getElementById(btn).disabled = true;
			}
			i++;
		}
		i = 0;
		while(data[i] != null) {
			var inside1 = iframeRef(document.getElementById('db1'));
			var inside2 = iframeRef(document.getElementById('db2'));
			var op1N = data[i].f1N;
			var op1T = data[i].f1T;
			var op2T = data[i].f2T;  
			var op2N = data[i].f2N;  
			var array1 = [];
			var array2 = [];
			
			while(op1N.indexOf(".")!= -1){
				array1.push({nome:op1N.substring(0, op1N.indexOf(".")), tipo: op1T.substring(0, op1T.indexOf("."))});
				op1N = op1N.substring(op1N.indexOf(".")+1);
				op1T = op1T.substring(op1T.indexOf(".")+1);
			}
			
			while(op2N.indexOf(".")!= -1){
				array2.push({nome:op2N.substring(0, op2N.indexOf(".")), tipo: op2T.substring(0, op2T.indexOf("."))});
				op2N = op2N.substring(op2N.indexOf(".")+1);
				op2T = op2T.substring(op2T.indexOf(".")+1);
			}
			
			
			var j = 0;
			while(array1[j]!= null){
				if(array1[j].tipo == "entity"){
					inside1.getElementById(array1[j].nome).style.strokeWidth = 350;
				} else if (array1[j].tipo == "relation") {
					inside1.getElementById(array1[j].nome).style.strokeWidth = 250;
				} else {
					inside1.getElementById(array1[j].nome).style.strokeWidth = 150;
				}
				inside1.getElementById(array1[j].nome).style.stroke = data[i].colore;
				j++;
			}
			
			j = 0;
			while(array2[j]!= null){
				if(array2[j].tipo == "entity"){
					inside2.getElementById(array2[j].nome).style.strokeWidth = 350;
				} else if (array2[j].tipo == "relation") {
					inside2.getElementById(array2[j].nome).style.strokeWidth = 250;
				} else {
					inside2.getElementById(array2[j].nome).style.strokeWidth = 150;
				}
				inside2.getElementById(array2[j].nome).style.stroke = data[i].colore;
				j++;
			}
			
			i++;
		}

	}
	
	/* Funzione per eliminare le operazioni nello storico, l'eliminazione poi avviene dovunque, quindi barra centrale e in sessine */
	function elimina(btn) {
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
		  	if (this.readyState == 4 && this.status == 200) {
				var data = JSON.parse(this.responseText);
				var inside2 = iframeRef(document.getElementById('db2'));					
				var inside1 = iframeRef(document.getElementById('db1'));					
		  		var i = 0;
				while(data[i] != null) {
					var op1N = data[i].f1N;
					var op2N = data[i].f2N;  
					var array1 = [];
					var array2 = [];
					
					while(op1N.indexOf(".")!= -1){
						array1.push({nome:op1N.substring(0, op1N.indexOf("."))});
						op1N = op1N.substring(op1N.indexOf(".")+1);
					}
					
					while(op2N.indexOf(".")!= -1){
						array2.push({nome:op2N.substring(0, op2N.indexOf("."))});
						op2N = op2N.substring(op2N.indexOf(".")+1);
					}
					
					
					var j = 0;
					while(array1[j]!= null){
						inside1.getElementById(array1[j].nome).style.strokeWidth = 1;
						j++;
					}
					
					j = 0;
					while(array2[j]!= null){
						inside2.getElementById(array2[j].nome).style.strokeWidth = 1;
						j++;
					}
					i++;
				}
		  		inserisciOperazione("null");
			};
		}
		xmlhttp.open("POST", "EliminaOperazione?op=" + btn, true);	
		xmlhttp.send();
	}
	
	/* Funzione che ti permette di scegliere tra destra e sinistra gli operandi, tinge ancge gli elementi selezionati e tutte le info
	sull'operazione in questione la selva in sessione, quindi numero dell'operazione rispetto all'ordine cronologico, il colore, gli 
	elementi a cui fa riferimento e la scelta(destra/sinistra). Questa funzione viene utilizzata anche per cambiare operazione*/
	function scelta(btn,colore) {	
		var op = btn.substring(11);
		var scelta = btn.substring(2, 3);
		var tipo = btn.substring(0,1);

		document.getElementById("lt"+scelta+"Operando"+op).disabled = true;
		document.getElementById("lt"+scelta+"Operando"+op).style.borderColor = "black";
		document.getElementById("lt"+scelta+"Operando"+op).style.borderWidth = "thick";
		
		document.getElementById("bt"+2+"Operando"+op).disabled = true;
		document.getElementById("bt"+1+"Operando"+op).disabled = true;
		document.getElementById("bt"+scelta+"Operando"+op).style.borderColor = "black";
		document.getElementById("bt"+scelta+"Operando"+op).style.borderWidth = "thick";	
		
		if(scelta == 1){
			document.getElementById("lt"+2+"Operando"+op).disabled = false;
			document.getElementById("lt"+2+"Operando"+op).style.borderColor = "white";
			document.getElementById("lt"+2+"Operando"+op).style.borderWidth = "thick";
			document.getElementById("bt"+2+"Operando"+op).style.borderColor = "white";
			document.getElementById("bt"+2+"Operando"+op).style.borderWidth = "thick";
		} else {
			document.getElementById("lt"+1+"Operando"+op).disabled = false;
			document.getElementById("lt"+1+"Operando"+op).style.borderColor = "white";
			document.getElementById("lt"+1+"Operando"+op).style.borderWidth = "thick";
			document.getElementById("bt"+1+"Operando"+op).style.borderColor = "white";
			document.getElementById("bt"+1+"Operando"+op).style.borderWidth = "thick";
		}
		
		var frame1 = JSON.parse(sessionStorage.getItem('frame1'));
		var frame2 = JSON.parse(sessionStorage.getItem('frame2'));
		
		var i = 0, selFrame1N = "", selFrame2N = "", selFrame1T = "", selFrame2T = "";
		while(frame1[i] != null) {
			selFrame1N += ""+frame1[i].name+".";
			selFrame1T += ""+frame1[i].type+".";
			
			var inside1 = iframeRef(document.getElementById('db1'));

			if(frame1[i].type == "entity"){
				inside1.getElementById(frame1[i].name).style.strokeWidth = 350;
			} else if (frame1[i].type == "relation") {
				inside1.getElementById(frame1[i].name).style.strokeWidth = 250;
			} else {
				inside1.getElementById(frame1[i].name).style.strokeWidth = 150;
			}
			inside1.getElementById(frame1[i].name).style.stroke = colore;
			inside1.getElementById("img"+frame1[i].name).style.opacity = 1;

			i++;
		}
		
		i = 0;
		while(frame2[i] != null) {
			selFrame2N += ""+frame2[i].name+".";
			selFrame2T += ""+frame2[i].type+".";
			
			var inside2 = iframeRef(document.getElementById('db2'));
			
			if(frame2[i].type == "entity"){
				inside2.getElementById(frame2[i].name).style.strokeWidth = 350;
			} else if (frame2[i].type == "relation") {
				inside2.getElementById(frame2[i].name).style.strokeWidth = 250;
			} else {
				inside2.getElementById(frame2[i].name).style.strokeWidth = 150;
			}
			inside2.getElementById(frame2[i].name).style.stroke = colore;
			inside2.getElementById("img"+frame2[i].name).style.opacity = 1;

			i++;
		}
		
		if(tipo == 'b'){
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.open("POST", "SceltaOperazione?op=" + op + "&sc=" + scelta + "&f1Name=" + selFrame1N + "&f1Type=" + selFrame1T + "&f2Name=" + selFrame2N + "&f2Type=" + selFrame2T, true);	
			xmlhttp.send();
		} else {
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.open("POST", "CambioOperazione?op=" + op + "&sc=" + scelta, true);	
			xmlhttp.send();
		}
		
	    selectedNodes = JSON.parse(sessionStorage.getItem("frame1"));
	   	for(var i=0; i < selectedNodes.length; i++) {
	  		selectedNodes.splice(i, i+1);
	   	}	 
	    sessionStorage.setItem("frame1", JSON.stringify(selectedNodes));
	    sessionStorage.setItem("frame2", JSON.stringify(selectedNodes));
	}
	
	
	function iframeRef( frameRef ) {
	    return frameRef.contentWindow? frameRef.contentWindow.document: frameRef.contentDocument;
	}
	
	
	/* Funzione per il refresh del database 1 */
	function refresh1() {
		
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				var data = JSON.parse(this.responseText);
				var inside2 = iframeRef(document.getElementById('db2'));	
				var inside1 = iframeRef(document.getElementById('db1'));		
		  		var i = 0;
				while(data[i] != null) {
					var op1N = data[i].f1N;
					var op2N = data[i].f2N;  
					var array1 = [];
					var array2 = [];
					
					while(op1N.indexOf(".")!= -1){
						array1.push({nome:op1N.substring(0, op1N.indexOf("."))});
						op1N = op1N.substring(op1N.indexOf(".")+1);
					}
					
					while(op2N.indexOf(".")!= -1){
						array2.push({nome:op2N.substring(0, op2N.indexOf("."))});
						op2N = op2N.substring(op2N.indexOf(".")+1);
					}
					
					
					var j = 0;
					while(array1[j]!= null){
						inside1.getElementById(array1[j].nome).style.strokeWidth = 1;
						j++;
					}
					
					j = 0;
					while(array2[j]!= null){
						inside2.getElementById(array2[j].nome).style.strokeWidth = 1;
						j++;
					}
					i++;
				}
			};
		};
		xmlhttp.open("POST", "ResetSession?presente=Nframe1", true);	
		xmlhttp.send();
		
		sessionStorage.setItem("Nframe1", "");
		selectedNodes = JSON.parse(sessionStorage.getItem("frame1"));
	   	for(var i=0; i < selectedNodes.length; i++) {
	  		selectedNodes.splice(i, i+1);
	   	}	 
	    sessionStorage.setItem("frame1", JSON.stringify(selectedNodes));
	    sessionStorage.setItem("frame2", JSON.stringify(selectedNodes));

		document.getElementById("tutteOpLato").innerHTML = "";
		document.getElementById("operatoriSelezionati").innerHTML = "";
	
		var iframe = document.getElementById('db1');
		iframe.src = iframe.src;
	}

	/* Funzione per il refresh del database 2 */
	function refresh2() {	
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
				var data = JSON.parse(this.responseText);
				var inside2 = iframeRef(document.getElementById('db2'));		
				var inside1 = iframeRef(document.getElementById('db1'));					
		  		var i = 0;
				while(data[i] != null) {
					var op2N = data[i].f2N;
					var op1N = data[i].f1N;
					var array1 = [];
					var array2 = [];
					
					while(op1N.indexOf(".")!= -1){
						array1.push({nome:op1N.substring(0, op1N.indexOf("."))});
						op1N = op1N.substring(op1N.indexOf(".")+1);
					}
					
					while(op2N.indexOf(".")!= -1){
						array2.push({nome:op2N.substring(0, op2N.indexOf("."))});
						op2N = op2N.substring(op2N.indexOf(".")+1);
					}
					
					
					var j = 0;
					while(array1[j]!= null){
						inside1.getElementById(array1[j].nome).style.strokeWidth = 1;
						j++;
					}
					
					j = 0;
					while(array2[j]!= null){
						inside2.getElementById(array2[j].nome).style.strokeWidth = 1;
						j++;
					}
					
					i++;
				}
				inserisciOperazione("null");
			};
		};
		xmlhttp.open("POST", "ResetSession?presente=Nframe2", true);	
		xmlhttp.send();
		
		sessionStorage.setItem("Nframe2", "");
		selectedNodes = JSON.parse(sessionStorage.getItem("frame1"));
	   	for(var i=0; i < selectedNodes.length; i++) {
	  		selectedNodes.splice(i, i+1);
	   	}	 
	    sessionStorage.setItem("frame1", JSON.stringify(selectedNodes));
	    sessionStorage.setItem("frame2", JSON.stringify(selectedNodes));
		document.getElementById("tutteOpLato").innerHTML = "";
		document.getElementById("operatoriSelezionati").innerHTML = "";
		
		var iframe = document.getElementById('db2');
		iframe.src = iframe.src;
	}
	
	/* Funzione per recuperare dati con JSONSchemaER per poi passare il JSON generato a savePosition1Servlet() */
	function savePosition1(){
		var xmlhttp = new XMLHttpRequest();
 		xmlhttp.onreadystatechange = function() {
 			if (this.readyState == 4 && this.status == 200) {savePosition1Servlet(this);};
 		}
		var formData = new FormData();
 		formData.append("presente", "Nframe1");
 		xmlhttp.open("POST", "JSONSchemaER", true);
 		xmlhttp.send(formData);
	}
	
	/* Funzione per salvare le posizioni degli elementi del database 1 */
	function savePosition1Servlet(xmlhttp){
		var nodes = [];
		var gerarchia = [];
		var data = JSON.parse(xmlhttp.responseText);
		var i = 0;
			while(data.entity[i] != null){
				var j = 0;
			  	nodes.push({id:data.entity[i].name, type: "symbolSquare", img:  "imgForme/entita.png", imgS:  "imgForme/entitaSelezionata.png",h: 100, w:120});
			  	while(data.entity[i].attributes[j] != null){
			   		var w = 0, control = true;
			   		while(nodes[w] != null){
			    		if(data.entity[i].attributes[j] == nodes[w].id) control = false;
			    		w++;
			   		}
			   		if(control == true) {
			    		nodes.push({id:data.entity[i].attributes[j], type: "symbolCircle",  img:  "imgForme/attributo.png", imgS:  "imgForme/attributoSelezionato.png", h: 85, w:60});
			   		}else {
			    		nodes.push({id: data.entity[i].name + "-" + data.entity[i].attributes[j], size:4000, type: "symbolCircle", img:  "imgForme/attributo.png", imgS:  "imgForme/attributoSelezionato.png",h: 85, w:60});
			   		} 
			   		j++;
			  	}
			  	i++;
			}
			   
			i = 0;
			while(data.association[i] != null){
				j = 0;
			   	while( data.association[i].entity[j] != null){
			    	j++;
			   	}
			   	nodes.push({id:data.association[i].name, type: "symbolDiamond", img:  "imgForme/relazione.png",imgS:  "imgForme/relazioneSelezionata.png", h: 130, w:100});
			   	i+=2;
			}
			 
			i = 0;
		 	while(data.hierarchy[i] != null){
				j = 0;
			 	var test = true;
			 	while(gerarchia[j] != null){
			  		if(gerarchia[j].father == data.hierarchy[i].father){test = false;}
			  		j++;
			 	}
			 	if(test == true) gerarchia.push({father:data.hierarchy[i].father});
			 	i++;
			}
			 
			i = 0;
			while(gerarchia[i] != null){
				nodes.push({id:i, type: "symbolTriangolo", img:  "imgForme/gerarchia.png",imgS:  "imgForme/gerarchiaSelezionata.png", h: 100, w:70});
				i++;
			}
			 
		    var inside1 = iframeRef(document.getElementById('db1'));
			var k = 0;
			var nomi="", x="", y="";
			while(nodes[k] != null){	 
				nomi+=nodes[k].id+"__";
				var div = inside1.getElementById(nodes[k].id);
				var rect = div.getBoundingClientRect();
				var scale = sessionStorage.getItem("scale");
				var viewBox = sessionStorage.getItem("viewBox");
				x+=""+rect.left/scale+"_";
				y+=""+rect.top/scale+"_";
				k++;
			}
			 
			var xmlhttp = new XMLHttpRequest();
		 	xmlhttp.open("POST", "SavePosition?nomi="+nomi+"&x="+x+"&y="+y+"&url=Nframe1", true);
		 	xmlhttp.send();
		 	alert("File salvato in cartella Codit"); 
	}
	
	/* Funzione per recuperare dati con JSONSchemaER per poi passare il JSON generato a savePosition2Servlet() */
	function savePosition2(){
		var xmlhttp = new XMLHttpRequest();
 		xmlhttp.onreadystatechange = function() {
 			if (this.readyState == 4 && this.status == 200) {savePosition2Servlet(this);};
 		}
		var formData = new FormData();
 		formData.append("presente", "Nframe2");
 		xmlhttp.open("POST", "JSONSchemaER", true);
 		xmlhttp.send(formData);
	}
	
	/* Funzione per salvare le posizioni degli elementi del database 1 */
	function savePosition2Servlet(xmlhttp){
		var nodes = [];
		var gerarchia = [];
		var data = JSON.parse(xmlhttp.responseText);
		var i = 0;
		while(data.entity[i] != null){
			var j = 0;
			nodes.push({id:data.entity[i].name, type: "symbolSquare", img:  "imgForme/entita.png", imgS:  "imgForme/entitaSelezionata.png",h: 100, w:120});
			while(data.entity[i].attributes[j] != null){
				var w = 0, control = true;
			   	while(nodes[w] != null){
			    	if(data.entity[i].attributes[j] == nodes[w].id) control = false;
			    	w++;
			   	}
			   	if(control == true) {
			    	nodes.push({id:data.entity[i].attributes[j], type: "symbolCircle",  img:  "imgForme/attributo.png", imgS:  "imgForme/attributoSelezionato.png", h: 85, w:60});
			   	} else {
			    	nodes.push({id: data.entity[i].name + "-" + data.entity[i].attributes[j], size:4000, type: "symbolCircle", img:  "imgForme/attributo.png", imgS:  "imgForme/attributoSelezionato.png",h: 85, w:60});
			   	}
				j++;
			}
			i++;
		}	  	 
		i = 0;
		while(data.association[i] != null){
			j = 0;
			while( data.association[i].entity[j] != null){
				j++;
			}
			nodes.push({id:data.association[i].name, type: "symbolDiamond", img:  "imgForme/relazione.png",imgS:  "imgForme/relazioneSelezionata.png", h: 130, w:100});
			i+=2;
		}	 
		i = 0;
		while(data.hierarchy[i] != null){
			j = 0;
			var test = true;
			while(gerarchia[j] != null){
				if(gerarchia[j].father == data.hierarchy[i].father){test = false;}
			  	j++;
			}
			if(test == true) gerarchia.push({father:data.hierarchy[i].father});
				i++;
		}
		i = 0;
		while(gerarchia[i] != null){
			nodes.push({id:i, type: "symbolTriangolo", img:  "imgForme/gerarchia.png",imgS:  "imgForme/gerarchiaSelezionata.png", h: 100, w:70});
			i++;
		}	 
		var inside1 = iframeRef(document.getElementById('db2'));
		var k = 0;
		var nomi="", x="", y="";
		while(nodes[k] != null){		 
			nomi+=nodes[k].id+"__";	
			var div = inside1.getElementById(nodes[k].id);
			var rect = div.getBoundingClientRect();
			var scale = sessionStorage.getItem("scale");
			var viewBox = sessionStorage.getItem("viewBox");
			x+=""+rect.left/scale+"_";
			y+=""+rect.top/scale+"_";
			k++;
		}
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("POST", "SavePosition?nomi="+nomi+"&x="+x+"&y="+y+"&url=Nframe2", true);
		xmlhttp.send(); 		
		alert("File salvato in cartella Codit");
	}
	
	/* Funzione per flirtare le operazioni selezionabili nel modal */
	function filtro() {
		d3.select('#btn1').style('display', 'none');
		d3.select('#btn2').style('display', 'none');
		d3.select('#btn3').style('display', 'none');
		d3.select('#btn4').style('display', 'none');
		d3.select('#btn5').style('display', 'none');
		d3.select('#btn6').style('display', 'none');
		d3.select('#btn7').style('display', 'none');
		d3.select('#btn8').style('display', 'none');
		d3.select('#btn9').style('display', 'none');
		
		var frame1 = JSON.parse(sessionStorage.getItem('frame1'));
		var frame2 = JSON.parse(sessionStorage.getItem('frame2'));
				
		//variabili che contano contano per tipo di oggetto
		var entity1 = 0, relation1 = 0, attribute1 = 0, hierarchy1 = 0;
		var entity2 = 0, relation2 = 0, attribute2 = 0, hierarchy2 = 0;
		
		//ciclo per il conteggio nel frame sinistro
		var i = 0;
		while(frame1[i] != null) {
			switch (frame1[i].type) {
			case 'entity': 
						entity1 += 1;
						break;
			case 'hierarchy': 
						hierarchy1 += 1;
						break;
			case 'relation': 
						relation1 += 1;
						break;
			case 'attribute': 
						attribute1 += 1;
						break;
			default: break;
			}
			i++;
		}
		
		//ciclo per il conteggio nel frame destro
		i = 0;
		while(frame2[i] != null) {
			switch (frame2[i].type) {
			case 'entity': 
						entity2 += 1;
						break;
			case 'relation': 
						relation2 += 1;
						break;
			case 'hierarchy': 
						hierarchy2 += 1;
						break;
			case 'attribute': 
						attribute2 += 1;
						break;
			default: break;
			}
			i++;
		}
		
		//controllo degli oggetti per la visualizzazione dei
		//button per gli operatori del modal
		if ((attribute1 == 1) && (entity1 == 0) && (relation1 == 0) && (hierarchy1 == 0)) {
			if ((entity2 == 0) && (relation2 == 0)  && (hierarchy2 == 0)) {
				if (attribute2 == 1) {
					d3.select('#btn1').style('display', 'inline-block');
				} else if(attribute2 > 1) {
					d3.select('#btn2').style('display', 'inline-block');
				}
			} else if ((entity2 == 2) && (relation2 == 1) && (hierarchy2 == 0)) {
				if (attribute2 == 0) {
					d3.select('#btn3').style('display', 'inline-block');
				}
			}
		} else if ((attribute1 == 0) && (entity1 == 1) && (relation1 == 0) && (hierarchy1 == 0)) {
			if ((attribute2 == 0) && (entity2 == 2) && (relation2 == 1) && (hierarchy2 == 0)) {
				d3.select('#btn6').style('display', 'inline-block');
			}
		} else if ((attribute1 == 0) && (entity1 == 2) && (relation1 == 1) && (hierarchy1 == 0)) {
			if ((attribute2 == 0) && (entity2 == 2) && (relation2 == 2) && (hierarchy2 == 0)) {
				d3.select('#btn5').style('display', 'inline-block');
			}
		} else if ((attribute1 == 0) && (entity1 > 2) && (relation1 == 1) && (hierarchy1 == 0)) {
			if ((attribute2 == 0) && (entity2 == 3) && (relation2 == 2) && (hierarchy2 == 0)) {
				d3.select('#btn4').style('display', 'inline-block');
			}
		} else if ((attribute1 == 0) && (entity1 > 2) && (relation1 == 0) && (hierarchy1 == 1)) {
			if (attribute2 == 0) {
				if (relation2 == 0) {
					if ((entity2 == (entity1 - 1)) && (hierarchy2 == 0)) {
						d3.select('#btn7').style('display', 'inline-block');
					} else if ((entity2 == 1) && (hierarchy2 == 0)) {
						d3.select('#btn8').style('display', 'inline-block');
					}
				} else if (relation2 == 2) {
					if ((entity2 == entity1) && (hierarchy2 == 0)) {
						d3.select('#btn9').style('display', 'inline-block');
					}
				}
			}
		}		
	}
</script>
</body>
</html>